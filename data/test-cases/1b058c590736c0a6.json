{"uid":"1b058c590736c0a6","name":"Create Protocol for microbial residue verification for non split","fullName":"tests.scenarios.test_multi_prodcution_protocol.TestMultiProductionProtocol#test_create_microbial_residue_verification_protocol_direct_indirect_bop_non_split","historyId":"bd8725616f6236db705dc42ee88f3130","time":{"start":1707799804759,"stop":1707799808093,"duration":3334},"description":"This test case tests API to Create Protocol microbial residue verification for non split when select based on policy of both direct and indirect and validate the limits","descriptionHtml":"<p>This test case tests API to Create Protocol microbial residue verification for non split when select based on policy of both direct and indirect and validate the limits</p>\n","status":"broken","statusMessage":"NameError: name 'update_microbial_residue_verification_payload' is not defined","statusTrace":"self = <test_multi_prodcution_protocol.TestMultiProductionProtocol object at 0x0000026819773C50>\n\n    @allure.title(\"Create Protocol for microbial residue verification for non split\")\n    @allure.description(\"This test case tests API to Create Protocol microbial residue verification for non split when \"\n                        \"select based on policy of both direct and indirect and validate the limits\")\n    @allure.link(\"https://app.clickup.com/t/86cu5qg11\")\n    @pytest.mark.formulation\n    @pytest.mark.create_microbial_residue_verification_protocol_direct_indirect_bop_non_split\n    def test_create_microbial_residue_verification_protocol_direct_indirect_bop_non_split(self):\n    \n        vol_unit = self.policy_microbial.default_units.test_get_default_unit(data={\"default_unit_name\": \"volume\"})[\n            \"response\"]\n        surface_unit = \\\n            self.policy_microbial.default_units.test_get_default_unit(data={\"default_unit_name\": \"surface_area\"})[\n                \"response\"]\n        unit = json.loads(vol_unit)\n        surface_unit = json.loads(surface_unit)\n        policy = self.policy_microbial.test_get_microbial_cleaning_limits_policy()[\"response\"]\n        policy = json.loads(policy)[\"result\"]\n    \n        volume_unit = unit[\"default_units\"][\"unit\"]\n        surface_area_unit = surface_unit[\"default_units\"][\"unit\"]\n    \n        payload = create_cleaning_limit_policy_microbial(policy, {\"splitBacteriaAndFungi\": False,\n                                                                  \"microbial_type\": \"bioBurden\",\n                                                                  \"default_unit\": volume_unit,\n                                                                  \"surface_area_unit\": surface_area_unit})\n    \n        endotoxin_data = {}\n        endotoxin_data.update({\"update_policy_payload\": payload})\n        microbial_policy_update = self.policy_microbial.test_update_microbial_cleaning_limits_policy(endotoxin_data)[\n            \"response\"]\n        if microbial_policy_update:\n            self.change_assessment.test_start_cleaning_assessment(scenario=True)\n            self.change_assessment.test_submit_approve_cleaning_assessment()\n    \n        columns_prod = [\"production_id\"]\n        productions_list = Excel.read_excel_columns(const.get_master_data(), \"config\", columns_prod)\n        data = {\"production\": productions_list[\"production_id\"], \"description\": \"Automation Protocol\"}\n        protocol_detail, data = self.setup_protocol(data)\n        self.multi_protocol.PROTOCOL = json.loads(protocol_detail)\n        data.update({\"protocol_name\": None})\n        protocol_id = self.multi_protocol.get_protocol_id(data)\n        data.update({\"protocol_id\": protocol_id, \"microbial_verification\": True})\n        data.update({\"update_verification_protocol\": protocol_verification_payload(data)})\n        get_equipment = self.protocol_equipment.get_equipment_protocol(data)[\"response\"]\n    \n        self.protocol_microbial.PROTOCOL_EQUIPMENT = json.loads(get_equipment)\n    \n        self.protocol_verification.update_inspection_protocol(data)\n    \n        direct_equipments_sal = \\\n            self.protocol_microbial.get_microbial_direct_contact_surface_area_details(data)[\"response\"]\n        self.protocol_microbial.DIRECT_MICROBIAL_EQUIPMENT = json.loads(direct_equipments_sal)\n        indirect_equipment_sal = \\\n            self.protocol_microbial.get_microbial_indirect_contact_surface_area_details(data)[\"response\"]\n        self.protocol_microbial.INDIRECT_MICROBIAL_EQUIPMENT = json.loads(indirect_equipment_sal)\n    \n        direct_equipment = self.protocol_microbial.direct_update_policy_payload()[\"bioburden\"][\"equipments\"]\n        indirect_equipment = self.protocol_microbial.indirect_update_policy_payload()[\"bioburden\"][\"equipments\"]\n    \n        data.update({\"direct_equipment\": direct_equipment, \"indirect_equipment\": indirect_equipment,\n                     \"direct_policy\": \"policyBased\", \"indirect_policy\": \"policyBased\"})\n        data.update(\n>           {\"update_microbial_residue_verification_payload\": update_microbial_residue_verification_payload(data)})\nE       NameError: name 'update_microbial_residue_verification_payload' is not defined\n\ntests\\scenarios\\test_multi_prodcution_protocol.py:3118: NameError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1707799383384,"stop":1707799383822,"duration":438},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"get_facility","time":{"start":1707799383822,"stop":1707799384622,"duration":800},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"afterStages":[],"labels":[{"name":"tag","value":"create_microbial_residue_verification_protocol_direct_indirect_bop_non_split"},{"name":"tag","value":"formulation"},{"name":"tag","value":"multi_production_protocol"},{"name":"tag","value":"scenario"},{"name":"parentSuite","value":"tests.scenarios"},{"name":"suite","value":"test_multi_prodcution_protocol"},{"name":"subSuite","value":"TestMultiProductionProtocol"},{"name":"host","value":"DESKTOP-ESU2KLG"},{"name":"thread","value":"20380-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.test_multi_prodcution_protocol"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/86cu5qg11","url":"https://app.clickup.com/t/86cu5qg11","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["create_microbial_residue_verification_protocol_direct_indirect_bop_non_split","multi_production_protocol","scenario","formulation"]},"source":"1b058c590736c0a6.json","parameterValues":[]}